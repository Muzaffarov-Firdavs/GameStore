@using GameStore.Service.DTOs.Files;
@model SingleFile

@{
    var user = ViewBag.User;
}

@{
    ViewData["Title"] = "upload avatar";
}

@*
<div>
    <br /><br /><br /><br />
</div>
<div class="card w-450px h-400px mt-20 mb-100 " style="margin-left:auto; margin-right:auto; box-shadow: 0px 0px 15px gray; background-color: #D3D3D3">
    <form asp-controller="users" asp-action="uploadavatar" class="container">

        <div class="text-center mb-11">
            <br />
            <p class="fs-4 fw-bolder mb-3">
                Change avatar:
            </p>
        </div>
        <div class="testimonial avatar-back">
            <img src="~/static-images/default.jpg" alt="avatar" />
        </div>

    </form>

    <!--end::Form-->
</div>

<br /><br /><br />

<div class="clr"></div> *@

<div class="card w-450px h-400px mb-100 " style="margin-left:auto; margin-right:auto; box-shadow: 0px 0px 15px gray; background-color: #D3D3D3">
    <form asp-controller="users" asp-action="uploadavatar" method="post">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

        <section id="testimonials">
            <div class="container">
                <div class="form-group">
                    <div class="testimonial">
                        <div class="avatar-wrapper">
                            <label for="File">Select Image File:</label>
                            <img class="profile-pic" src="" />
                            <div class="upload-button">
                                <i class="fa fa-arrow-circle-up" aria-hidden="true"></i>
                            </div>
                            <input class="file-upload" type="file" name="File" />
                            <span asp-validation-for="File" class="text-danger"></span>
                        </div>
                        <h3 class="text-center">@user.FirstName @user.LastName</h3>
                        <h6 class="text-center">@user.Email</h6>
                        <br />
                        <h6 class="text-center">@@<span>@user.Username</span></h6>
                    </div>
                </div>
                <div class="form-group">
                    <div class="text-center">
                        <input type="submit" value="Save" class="btn btn-primary" />
                    </div>
                </div>
            </div>
        </section>

    </form>
</div>

<script>
    $(document).ready(function () {

        var readURL = function (input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('.profile-pic').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }

        $(".file-upload").on('change', function () {
            readURL(this);
        });

        $(".upload-button").on('click', function () {
            $(".file-upload").click();
        });
    });
</script>